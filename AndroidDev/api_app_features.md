# Features (without Rooting)
## Microphone
### Phone Call recording
Remotely record any call made to or from a target device. 
### Spycall
If you want to instantly listen to your child or employees' phone surroundings, secretly and in real-time using your own phone, then you need Spycall from FlexiSPY. Just enter your phone number inside your FlexiSPY online account and then call their phone from your phone when it is not in use to be patched in secretly to start listening immediately.
### Environment (Ambient) recording
Ambient Recording is a FlexiSPY feature that allows you to discreetly record a phone’s surroundings and listen later. You can begin recording on-demand or set specific times to record and our Ambient Recording feature will automatically upload the audio files to your online user portal for convenient listening.
### VOIP Call Recording
Our VoIP call recording feature allows you to remotely record VoIP calls made using popular VoIP applications including Facebook Messenger, LINE, Viber, WhatsApp, and more. As soon as a call is made or received using one of the supported apps, our VoIP call recording software automatically records the conversation and uploads it to your secure web portal for convenient listening later.
[Reference](https://stackoverflow.com/questions/50970915/how-do-some-apps-overcome-phone-recording-restrictions)
### Skype Call Recording
Android Skype Call Recording is a FlexiSPY feature that allows you to discreetly record and listen to skype calls on Android devices

## Camera
* Remote Camera: Our unique RemCam (Remote Camera) feature lets you take over a target mobile device’s camera discretely and remotely, letting you take up to two photos at a time — one each with the back and front camera.
* Remote Video: is a unique FlexiSPY feature that allows you to remotely and discreetly take control of a phone’s camera and use it to record videos. 

## App Data
* Facebook Messages: Our Facebook Messenger Tracker feature lets you discreetly spy on any Facebook message sent or received on the device with FlexiSPY installed. 
* Snapchat Messages: Once installed on their phone, FlexiSPY secretly captures all incoming and outgoing Snapchat messages and then uploads these conversations to your secure online dashboard
* Instagram Messages: Instagram Message Tracking is a FlexiSPY feature that allows you to remotely spy on the Instagram messages of your child or employees. Once installed on their phone, FlexiSPY will capture both sent and received messages and will upload them to your secure online portal where you can conveniently read through them later.
* Viber Messages: Our Viber spy app feature allows you to view all Viber messages sent and received on your child or employees' phone. Once installed and activated, FlexiSPY will capture and upload the message contents to your secure online dashboard for convenient reading later.
* WhatsApp Messages: Our WhatsApp Tracker feature allows you to remotely and discretely view all incoming and outgoing messages and multimedia on one of the world’s most popular messengers. Once installed, FlexiSPY will capture and upload the messages to your secure online dashboard for convenient reading later. 
* Tinder Messages: It is now possible to remotely spy on Tinder messages with our Tinder spy app feature. Once installed, FlexiSPY captures and uploads the Tinder message details to your secure online dashboard where you can read through them conveniently later.
* Gmail: Our Gmail spy app feature allows you to read all Emails sent or received with the Gmail app on a target device. Once installed, FlexiSPY captures and uploads the entire Gmail history to your secure online dashboard where you can sort and read through the emails at your convenience.

## User Data
* Address Book: Our Address Book tracking feature allows you to get contact information directly from your child or employees address book, letting you uncover details like contact names, telephone numbers, associated email addresses, and more.
* SMS Messages: SMS Tracker is a FlexiSPY feature which is also available as a standalone product that allows you to see all sent or received SMS message on a device with FlexiSPY installed — even if the SMS has been deleted. 
* Call Logs: Call logging is a FlexiSPY feature that allows you to spy on the call logs of any phone that has FlexiSPY installed on it. Using this feature you can see things like when the call was made, the name of the person on the other end of the call, the call duration, and more. 
* MMS Messages: Our MMS message tracking feature allows you to remotely and discreetly spy on all MMS messages sent or received from the target device. Once installed, FlexiSPY will capture all MMS messages and will upload them to your secure online portal for convenient viewing later. 
* Location Tracking: GPS tracking is a FlexiSPY feature that enables you to discreetly know exactly where someone is at any given time. Once FlexiSPY has been installed on the target device, FlexiSPY will upload their GPS location to your secure online dashboard for convenient viewing.
* Dashboard Alerts: Alerts is one of FlexiSPY’s most powerful features. Used correctly, you’ll save a lot of time and will be less likely to miss out on information that’s important to you. After you’ve purchased and installed FlexiSPY, setup alerts using our Alert Wizard inside your dashboard. This Wizard lets you create and name your own custom alerts by specifying criteria that will result in a notification being generated for you on your dashboard.
* Network Connections: Network Connections is a FlexiSPY feature that allows you to see a list of names of all cellular and Wi-Fi networks the device has ever connected to, including the date and time the connection was made or broken. By spying on network connections, you can make sure your child is where they say they are, or check whether an employee is really attending a training conference — even if their phone’s GPS is turned off.
* Application Activity: Application Activity is a FlexiSPY feature that shows you the complete details about the usage of every app being used on the device being monitored. This lets you do things like detect when an app was launched or closed, see how many times it was used in a specific date range, for how long, and more. Why did your daughter install a dating app on her phone? Why has your employee started using a job searching app? Our Application Activity feature helps answer pressing questions like these and many more.
* Installed Applications: Our installed Applications feature allows you to see which applications are currently installed on a device being monitored. This allows you to do things like search the list of apps based on keyword, see the date the app was installed, and even see the version number of the app installed. This feature could prove essential for safety and productivity purposes, helping you to answer important questions like “is my son using any dangerous apps on his phone?” or “are any of my employees using a disallowed app on company devices?”.
* Keylogger: FlexiSPY’s Keylogger feature lets you see everything that's being typed on any application in a target device remotely and discretely. FlexiSPY records the entire keystroke history of the device and also provides keyword alerts when critical words or phrases which may jeopardize the safety of your children or lead to a data breach of sensitive company information are logged. 
* Photos: Our Spy on Photos feature allows you to view all images sent, received, saved and deleted on a target device. This can provide you with the peace of mind that your children are not engaged in any risky behavior, or that employees are not taking pictures of any your company’s sensitive data or processes. A picture’s worth a thousand words, and with the ability to snap photos on a smartphone easier than ever, the need for you to have FlexiSPY’s photo tracker app feature has never been greater. 
* Videos: FlexiSPY’s allows you to view all Video Files stored on a target device. Protect yourself and your loved ones or keep track of employees with FlexiSPY’s video viewer – the best spy video app on the market. 
* Audio: Our audio spy app feature lets you hear and record all audio files stored, created, or sent on a target device. FlexiSPY's spy on audio files feature helps to protect your loved ones or keep track of employees by accessing all audio and voice memo files on a mobile device. 
* Calendar: Our Calendar tracker feature allows you to spy on all calendar details and appointments on a target device, letting you see all scheduled meetings plus important details like time, location, place and meeting notes.
* Check Device Battery Status: Our Check Device Battery feature allows you to quickly and easily see the battery level of your child or employee's device at any time. Once FlexiSPY has been installed on the device, simply login to your secure online dashboard to view the devices battery level. 

## Convenience Feature
* Completely Hidden: FlexiSPY gives users the choice of whether or not they wish to display the application icon according to their needs by allowing them to choose to run the software in the foreground or not. (For Android, Flexispy is only fully hidden in the apps list if the phone is rooted. An innoculous name (not FlexiSPY) appears as a system process on un-rooted Android, but if you wish to fully hide even this then please install on a rooted device. FlexiSPY is always fully hidden on iPhone Targets.)
* Remote Control from Web: FlexiSPY allows you to control all aspects of the phone conveniently via your secure online dashboard
* Deactivate Remotely: Our Deactivate Remotely feature allows you to remotely deactivate FlexiSPY on their phone. You can deactivate FlexiSPY from inside your portal and once you have done so FlexiSPY will lay dormant until your either uninstall it remotely or activate it again. 


# APIs
## Query Phone Number
### Permission
```xml
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
```

### Code
```java
// Get telephone manager
// or android.content.Context.TELEPHONY_SERVICE, which is "phone".
TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService("phone"); 

// Get Phone Type
// Returns a constant indicating the device phone type. This indicates the type of radio used to transmit voice calls.
int phoneType = telephonyManager.getPhoneType();
// PHONE_TYPE_NONE = 0 (no phone radio)
// PHONE_TYPE_GSM = 1
// PHONE_TYPE_CDMA = 2
// PHONE_TYPE_SIP = 3
```

## Delete Apps
### Permission
Since Android Pie (Android 9), apps are required to declare that they request apps to be deleted. This can be done by adding this permission to the AndroidManifest.xml,
```xml
<uses-permission android:name="android.permission.REQUEST_DELETE_PACKAGES"/>
```
### Code
```java
// this will open the uninstall dialog
startActivity(new Intent("android.intent.action.DELETE", Uri.parse("package:" + getPackageName())));
```

## Send Text Messages
### Permission
```xml
<uses-permission android:name="android.permission.SEND_SMS"/>
```

### Code
```java
SmsManager smsManager = SmsManager.getDefault();
ArrayList<String> divideMessage = smsManager.divideMessage(message);
boolean z4 = this.f136a;
if (divideMessage.size() > 1) {
    smsManager.sendMultipartTextMessage(recipientNumber, null, divideMessage, null, null);
} else {
    smsManager.sendTextMessage(recipientNumber, null, message, null, null);
}
```



# Apps
## Flexispy
[Website](https://www.flexispy.com/en/features-overview.htm#android)
[Capability Page](https://www.flexispy.com/en/compatibility.htm#android)

### Notes

## Boldbest
[Phone Recording](https://www.boldbeast.com/forum/topic1877-android-10-call-recording.html)



## SPAPP
### Version
15.6.0
### Notes
How do SPAPP read private messages from other apps without rooting? [Through accessibility](https://www.spappmonitoring.com/news/display/whatsapp_spy), [More](https://portal.flexispy.com/help/en/install/install-no-root-android.html).

* com.sp_a_pp_mmm.alarm.p012a.dfggkk
  * tyaas contains a bunch of wechat/fb strings
  * dsfsdfhtryu contacts server with local info
  * jtcc maps functionality (e.g., social_rec) to existing system preference


* com.sp_a_pp_mmm.alarm.services.MyAccessibilityService (setup service, and read information, and load an activity called CheckWarning)
  * onAccessibilityEvent
    * `if (dfggkk.jtcc("social_rec", this).equals("false"))` will never be executed (see jtcc)
    * `charSequence = accessibilityEvent.getPackageName().toString();`
    * Whatsapp
      * `sharedPreferences7.getString(fsbbfbh.sdfoo, null)`
  * hgjuu: read text from accessibility event


* p013a.p003b.p004a.p005a.ghjyyy
  * ghjyyy: debug log output to disk


* com.sp_a_pp_mmm.alarm.fsbbfbh (seems like a helper/def class)
  * fsgeggh: `return i % 41 == 0 && str.contains("42");`
  * sdfoo: `"configReadRootWhatsapp"`
  * fsghthjj: Takes in a long tjat seems to be the timestamp, convert it to a timestamp in string format.



com.sp_a_pp_mmm.alarm.jmoooy --> seems to be DB function

## Flexispy v4
### Notes
To tell which class a file is, look at the debug log. The first string is generally the name of the class.

#### VOIP
* com.p024fp.callhandler.os10.C0848c: suspicious for VOIP
  * `CallRecordingCaptureOS10` class
  * m2523b: `startRecording, info:`, also seems to be printing a bunch of logs until `a2.m2531a(aVar)`, which should be `instanticated in Accessiblity`
  * m2524a: `recordCallWithDirection` method. Calls `m2523b` to start recording. 
  * mo2521b: calls m2524a (`recordCallWithDirection`). Handles OutgoingCallConnected. `@RequiresApi(api = 18)`
  * mo2525a: calls m2524a (`recordCallWithDirection`). Handles IncomingCallConnected. `@RequiresApi(api = 18)`
  * mo2516a: calls m2523b (`startRecording`)

* com.p024fp.callhandler.os10.C0847b
  * `CallRecorder` class
  * m2531a: `start recording`, `this.f905b = new MediaRecorder();`

* com.p024fp.callhandler.os10.C0846a: data structure for storing recording information

* com.p024fp.callhandler.phonestate.C0853a
  * `MyPhoneStateListener` class
  * m2511a: `notifyIncomingCall` method, calls mo2525a.
  * onCallStateChanged: calls m2511a (`notifyIncomingCall`)

* com.p024fp.callhandler.os10.VoIPCallRecordingStateNotifier
  * m2534a: calls mo2516a (which starts recording)
  * onNotificationPosted calls m2534a. Also contains `isStrVoipOngoingChannel(f889f)` before calling m2534a.

* com.p024fp.callhandler.C0837b
  * Call handler before OS 10. The entire implementation uses a third-party library


#### Phone Calls
Entry point for phone recording:
* com.p024fp.appengine.AppStartUpHandler
  * onReceive: calls `startServices`, which starts CoreService.class

* com.p024fp.CoreService
  * onCreate: spins off a handler thread, which calls `startEngine`, which failed to parse
    * In smali, see string "constructComponents # Call Handler"
    * `invoke-direct Lcom/fp/callhandler/b;-><init>(Lcom/fp/base/RunningMode;Landroid/content/Context;Ljava/lang/String;Lcom/fp/preference/b;Lcom/fp/base/a;)V`
    * Another string "> activate # Running in normal mode, start phone state oberservers."
    * Starts a Thread called CallHandlerThread for `CallHandlerImpl`.
    * Set MyPhoneStateListener `bVar4.f853c = new MyPhoneStateListener(bVar4);`
    * Register MyPhoneStateListener `CallHandlerImpl.this.f851a.listen(CallHandlerImpl.this.f853c, 32);`
    * Spins off a thread for `CallHandlerThread`
    * send `sendAppStartUpMethod`


* com.p024fp.callhandler.CallHandlerImpl
  * Calls `CallHandlerImpl.this.f854d.startRecord(a3, str8);`. `f854d` is a `CallRecorderInterface`, which is initialized through `setCallRecorder`

* com.p024fp.appengine.AppEngineHelper calls `setCallRecorder` in `manageCallRecorder`, with an initialized `CallRecorderInterface` via `CallRecorderFactory.getCallRecorder(bVar.f715aa, bVar.f716ab, bVar.f717ac, bVar.f729m, bVar.f723g);`
  * manageCallRecorder: one parameter z is `isLicenseActivated`
    * `f701N` (CallHandlerImpl), which I don't think it's used anymore. --> Wrong
    * `f712Y` (CallRecordingCaptureOS10), `f712Y` is only initialized if version >= android 9. 
    * `f702O` is generic interface of `CallRecorderImpl`, and it is initialized with a `CallRecorderFactory.getCallRecorder`. 
    * `f703P` ambientRecorder of type `Android42OrLowerRecorder`, initialized via `new Android42OrLowerRecorder();`
    * Logic: if android version >= 9, use `f712Y` for general recording and `f703P` for ambient recording. Otherwise, use `f702O` for general recording and `f703P` for ambient recording.
  * manageImCallRecording: for VOIP Recording. Set a flag when android version >= 10. Use `f712Y`.

Ambient Recording:
* com.p024fp.appengine.p054a.ExecOnDemandAmbientRecord
  * Execute: only do ambient recording when not phone recording. Use `f703P`

Phone Calls:
* com.p024fp.callhandler.phonestate.MyPhoneStateListener
  * `onReceive`: calls `onNormalModeIncomingCallConnected`. 
  * `f925a`: seems to be always null
  * `f924d` is always set to be an instance of CallRecordingCaptureOS10 --> Wrong (initialized in unobfuscated code)



* com.p024fp.callhandler.phonestate.OutgoingCallReceiver
  * onNormalModeOutgoingCallConnected
  * f921a: always null
  * `f922b` is always set to be an instance of CallRecordingCaptureOS10 
  
VOIP Recording:
* com.p024fp.callhandler.os10.VoIPCallRecordingStateNotifier
  * m2534a(str2, string, fxEventDirection), which calls mo2516a (which starts recording)
  * `f886c` is always set to be an instance of CallRecordingCaptureOS10 

FULL_MODE: seems to mean rooted phones

ENABLE_SPY_CALL.ordinal() = 34

Device Admin: ComponentName componentName = new ComponentName(this, AppDeviceAdminReceiver.class);



#### Hide from app drawer
PackageManager.setComponentEnabledSetting.
* Set the enabled setting for a package component (activity, receiver, service, provider). settings are persistent until reinstall (delete application, install again) or new value is set again with setComponentEnabledSetting()

#### Launch hidden app
NEW OUTGOING CALL & startActivity --> Not present at flexispy

#### Hard to uninstall
DeviceAdminReceiver.onDisableRequested --> Not present at Flexispy

Device Admin is a very dangerous permission. At the beginning of design, this functionality is an interface for manufacturers to develop mobile phone anti-theft functions. As long as the user installs such an app and clicks Activate, the APP has the device administrator authority and has the following permissions. One or more:
  * Encrypted storage
  * Disable camera
  * Disable lock screen related features
  * Forced password expired
  * Lock screen
  * Limit available password types
  * reset Password
  * Monitor password input for correct or incorrect
  * Erase data

#### “deathless” services
On destroy ---> Killed, Reboot

#### Hiding activities from the Recents screen
(in manifest) --> Not present at flexispy



## BB
RecordReceiver
* Func: m6314F `setSpeakerphoneOn`.

RecordService:
* Definitely starts recording here.